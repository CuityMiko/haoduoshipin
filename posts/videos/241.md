# 使用 css-transition-group

```
npm install react-transition-group
```

版本是比较混乱的，官方版已经不维护，社区1.0版跟官方版兼容，我这里安装的是社区2.0版，也是最新版。

所以看文档的时候也不要看[官方的这篇](https://reactjs.org/docs/animation.html) 了，而要看[这篇](https://reactcommunity.org/react-transition-group/) 。


.example-enter 和 .example-enter-active 是先后被加上去的，所以这个过程中就能加 transition 的 css 语句了。

```js
import React from 'react'
import ReactDOM from 'react-dom'
import { CSSTransition, TransitionGroup } from 'react-transition-group'

import './styles.css';

class FadeInAndOut extends React.Component {
  state = {
    show: false,
    count: 1
  }

  handleClick = e => {
    e.preventDefault()
    console.log('handleClick', this.state)
    this.setState({
      count: this.state.count + 1,
      show: true
    })
    // 目前这种思路就挺好
    setTimeout(
      () =>
      this.setState({
        show: false
      }),
      1000
    )
  }
  
  render() {
    const { show } = this.state
    return (
      <div>
        <button onClick={this.handleClick}>
          Click
        </button>
        <CSSTransition in={show} timeout={2000} classNames="like">
          <span className="likes-heart">{this.state.count}</span>
        </CSSTransition>
      </div>
    )
  }
}

export default FadeInAndOut
```

```css
body {
  margin: 0;
  background-image: url('http://o86bpj665.bkt.clouddn.com/posters/meteor-react-bird.png');
}

.likes-heart {
  background: url(http://o86bpj665.bkt.clouddn.com/redux-tower/heart.png) center no-repeat;
  background-size: contain;
  font-size: 2rem;
  padding: 1rem;
  position: absolute;
  color: #ff4081;
  left: 50%;
  top: 50%;
  pointer-events: none;
  opacity: 0;
  display: block;
}

/* animation */

.likes-heart.like-enter {
  transform: translateX(-50%) translateY(-50%) scale(1);
  transition: all 1s;
}

.likes-heart.like-enter.like-enter-active {
  transform: translateX(-50%) translateY(-50%) scale(5);
  /* 这里设置 500ms ，js 中 timeout 设置 1000 效果最佳 */
  opacity: 1;
}

.likes-heart.like-exit {
  transform: translateX(-50%) translateY(-50%) scale(5);
  transition: all 1s;
  opacity: 1;
}

.likes-heart.like-exit.like-exit-active {
  transform: translateX(-50%) translateY(-50%) scale(1);
  /* 这里设置 500ms ，js 中 timeout 设置 1000 效果最佳 */
  opacity: 0;
}

/* 
点按钮，首先进入 likes.heart.like-enter.like-enter-active
再点按钮，进入 likes.heart.like-exit.like-exit-active */
```
